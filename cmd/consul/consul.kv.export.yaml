# yaml-language-server: $schema=https://carapace.sh/schemas/command.json
name: export
description: Exports a tree from the KV store as JSON
flags:
    --ca-file=: Path to a CA file to use for TLS when communicating with Consul.
    --ca-path=: Path to a directory of CA certificates to use for TLS when communicating with Consul.
    --client-cert=: Path to a client cert file to use for TLS when 'verify_incoming' is enabled.
    --client-key=: Path to a client key file to use for TLS when 'verify_incoming' is enabled.
    --datacenter=: Name of the datacenter to query.
    --http-addr=: The `address` and port of the Consul HTTP agent.
    --namespace=: Specifies the namespace to query.
    --stale: Permit any Consul server (non-leader) to respond to this request.
    --tls-server-name=: The server name to use as the SNI host when connecting via TLS.
    --token-file=: File containing the ACL token to use in the request.
    --token=: ACL token to use in the request.
documentation:
    command: '[AI] `consul kv export` is a command used in Hashicorp''s Consul Key-Value (KV) store to export the data stored under specific keys as a JSON or YAML file. The command takes the path of the key(s) as an argument and writes the corresponding values to an output file specified by the user. For example, `consul kv export -file=output.json kv1/key1 kv2/key2` exports the values of keys `key1` under prefix `kv1` and `key2` under prefix `kv2` as a JSON file named `output.json`.'
    flag:
        ca-file: '[AI] `consul kv export --ca-file` is a command used with Hashicorp''s Consul Key Value (KV) store. This command exports the data from specific keys in the KV store as a file, in JSON format. The `--ca-file` option is used to specify the path to a file containing the CA (Certifying Authority) certificate for use with SSL/TLS secure communication between Consul and the client running this command. This ensures that the data transfer is encrypted when using the KV store over an insecure network.'
        ca-path: '[AI] `consul kv export --ca-path` is a command used with Hashicorp''s Consul Key-Value (KV) store. This command exports the data stored under specific keys as a file, but with an added security feature - it includes the root Certificate Authority (CA) certificates in the output. The `--ca-path` option specifies the path to save these CA certificates within the exported file. By including the CA certificates, secure transmission and verification of the data can be maintained even when sharing or transferring the exported file between different environments or users.'
        client-cert: |-
            [AI] The `consul kv export --client-cert` command is used with Consul, an open-source tool for service discovery, configuration, and orchestration. This specific command exports data from Consul's Key Value (KV) store using a client certificate for authentication.

            The `--client-cert` option specifies the path to the client certificate file, which is used to authenticate the request with the Consul server. The command then exports the specified KV data and saves it as a file in the local file system or can be piped to another tool. This method ensures secure access to the data by using a client certificate for authentication.
        client-key: '[AI] The `consul kv export --client-key` command is used with the Consul Key Value (KV) store to export data as a JSON file. The `--client-key` option specifies the API token or client key to authenticate the request. This flag ensures that only authorized users or applications can access and export the data from the Consul KV store.'
        datacenter: '[AI] The `consul kv export` command is used to export data from Hashicorp''s Consul Key-Value store. The `--datacenter` option specifies which datacenter to export data from in a multi-datacenter Consul setup. It ensures that only replicas and the leader in the specified datacenter will respond to the command, maintaining data consistency within that datacenter.'
        http-addr: '[AI] The `consul kv export --http-addr` command is used in Consul, a distributed config management and service discovery tool. This command exports the key-value data from Consul''s Key Value (KV) store to a file or standard output, using HTTP protocol over a specified address (--http-addr). It helps in backing up or transferring data between different Consul clusters or instances.'
        namespace: '[AI] The `consul kv export --namespace` command is used in Consul, a Connect and manage service discovery, configuration, and orchestration tool. This command exports keys from a specific namespace in Consul''s key-value store. The `--namespace` flag specifies the namespace to be exported. The output is saved as a file with a `.hcl` extension, which can be easily imported back into Consul using the `consul kv import` command.'
        stale: '[AI] `consul kv export --stale` is a command used in Hashicorp Consul, a service discovery and configuration management tool. This command exports the data from Consul''s key-value store with stale (potentially outdated) data. The flag `--stale` allows reading data that might not have been replicated across all nodes yet, which can be useful when dealing with data that changes frequently or in a distributed environment where data replication might not be up-to-date immediately.'
        tls-server-name: '[AI] The `consul kv export --tls-server-name` flag is used with Consul''s Key Value (KV) store command-line interface to export data securely over TLS. The `--tls-server-name` option specifies a DNS name or IP address for the Consul server, ensuring that SSL/TLS certificates are validated during communication between client and server, enhancing security.'
        token: '[AI] The `consul kv export --token` command is used in Hashicorp Consul, a popular service discovery and configuration management tool. This command exports the key-value data from Consul''s Key Value (KV) store into a file. It requires a token as an argument for authentication purposes. The flag `--token` is used to specify the token that has the necessary permissions to access and export the KV data.'
        token-file: '[AI] The `consul kv export --token-file` command is used in Consul, a popular service discovery and configuration management tool. This command exports keys and their values from Consul''s Key Value (KV) store to a file. It requires a token file that contains an access token with appropriate permissions to read the desired keys. The flag `--token-file` specifies the path to this token file, allowing secure access to the KV store data.'
