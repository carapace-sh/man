# yaml-language-server: $schema=https://carapace.sh/schemas/command.json
name: list-peers
description: Display the current Raft peer configuration
flags:
    --ca-file=: Path to a CA file to use for TLS when communicating with Consul.
    --ca-path=: Path to a directory of CA certificates to use for TLS when communicating with Consul.
    --client-cert=: Path to a client cert file to use for TLS when 'verify_incoming' is enabled.
    --client-key=: Path to a client key file to use for TLS when 'verify_incoming' is enabled.
    --datacenter=: Name of the datacenter to query.
    --http-addr=: The `address` and port of the Consul HTTP agent.
    --stale: Permit any Consul server (non-leader) to respond to this request.
    --tls-server-name=: The server name to use as the SNI host when connecting via TLS.
    --token-file=: File containing the ACL token to use in the request.
    --token=: ACL token to use in the request.
documentation:
    command: '[AI] The `consul operator raft list-peers` command is used with the Consul Operator, a tool for deploying and managing Consul, a Connect and KeyValue store, and service registration and discovery solution. This specific command lists the Raft peers in a Consul cluster. Raft is the consensus algorithm used by Consul to ensure data replication and availability across multiple servers. By running `raft list-peers`, you can view the IP addresses and names of the other nodes currently participating as peers in the Raft consensus group, providing information about the cluster''s configuration and membership.'
    flag:
        ca-file: '[AI] The `consul operator raft list-peers --ca-file` command is used to display the list of Raft peer nodes in a Consul cluster, along with their certificates (CA files). This command is part of the Consul Operator toolset for managing and configuring Consul clusters. The `--ca-file` option specifies the path to the CA file that was used to sign the TLS certificates for the Raft peers. The output shows each peer node''s address, ID, and the status of its connection to the cluster (learner or follower). This information is useful for verifying the identity and health of each Raft peer in the Consul cluster.'
        ca-path: '[AI] The `consul operator raft list-peers --ca-path` command is used to display the list of peers in a Consul Raft cluster, along with their corresponding X.509 certificates (CA paths). Consul is a distributed, highly available, and data center aware toolkit for service discovery, configuration, and orchestration. The Raft algorithm is used by Consul to ensure that all members agree on the order of events in the cluster''s log. This command helps you verify the identity of peers in your Consul cluster by providing their certificates stored at the specified `--ca-path`.'
        client-cert: '[AI] The `consul operator raft list-peers --client-cert` command is used with the Consul Operator, which is a tool for deploying and managing the Consul service discovery and configuration management platform. This specific command is part of the Raft consensus algorithm implementation in Consul, and it''s used to display the list of peers in the Raft cluster identified by their client certificates. In simpler terms, it helps you view the current membership of your Raft consensus cluster, which is essential for maintaining the health and consistency of a distributed Consul deployment.'
        client-key: |-
            [AI] The `consul operator raft list-peers --client-key` command is used with the Consul distributed coordination and service discovery tool. The `raft` part refers to Consul's built-in Raft algorithm for achieving consensus among its members.

            The `list-peers` subcommand displays the current set of peer nodes that Consul has elected as part of its Raft cluster. These peers form the quorum necessary for achieving consensus within the cluster. The `--client-key` flag specifies a client key to filter the output, displaying only the peers that this specific client is permitted to connect to. This can be useful in certain security or access control scenarios.
        datacenter: '[AI] The `consul operator raft list-peers --datacenter` command is used to display the Raft peer list for a specific Consul datacenter in the Operator interface. Consul is a distributed, highly available, and data center aware toolkit for service discovery, configuration, and orchestration. The Raft algorithm is used by Consul for its distributed consensus and replication. This command helps in checking the identities of other Consul servers that are considered peers in the same datacenter for leader election and data replication purposes.'
        http-addr: |-
            [AI] The `consul operator raft list-peers --http-addr` command is used with the Consul distributed coordination and service discovery tool. The `raft` part refers to Consul's Raft consensus algorithm, which ensures consensus among a distributed system of servers.

            The `list-peers` subcommand returns information about the peers (other servers) in the Raft cluster at a given Consul server's elected leader's address. The `--http-addr` option specifies the HTTP interface address to use when connecting to the Consul server, typically in the format of `<host>:<port>`. Together, this command allows you to view the list of peers that a Consul server is connected to within its Raft cluster.
        stale: '[AI] The `consul operator raft list-peers --stale` command is used in the Consul distributed system to display a list of peer nodes in a Raft cluster, including those that might be considered "stale" or outdated. This means that nodes that have been voted out or are no longer part of the active Raft quorum but still have data synced with them will also be shown in the output. This command can help in diagnosing issues related to node membership and communication within a Consul Raft cluster.'
        tls-server-name: |-
            [AI] The `consul operator raft list-peers --tls-server-name` command is used with the Consul distributed, highly available key-value store and configuration management tool. This command is specifically for the Consul Raft cluster members' communication, which is part of Consul's internal elect leader election process.

            The `--tls-server-name` option specifies the TLS server name (FQDN or IP address) that will be used to identify the server during secure (TLS) communication between peers in the Raft cluster. It is essential for ensuring secure communication and avoiding potential man-in-the-middle attacks. The output of this command is a list of the current Raft cluster peers, along with their addresses and statuses.
        token: |-
            [AI] The `consul operator raft list-peers --token` command is used with the Consul service discovery and configuration management tool. The `raft` keyword refers to Consul's distributed consensus algorithm, which helps keep data synchronized among multiple nodes in a cluster.

            The `list-peers` subcommand displays information about the peer nodes in a Raft cluster. Specifically, it shows each node's address, ID, and vote status (i.e., whether they are currently casting votes). The `--token` option filters the output to show only those peers that have the specified token. This is useful for clusters with multiple sets of nodes, where you might want to see the Raft configuration for just one set.
        token-file: '[AI] The `consul operator raft list-peers --token-file` command is used to display the Raft peer URLs of a Consul service cluster, which is managed by the Consul Operator. The `--token-file` argument specifies the path to the Consul token file that grants access to the cluster''s API. This command helps in obtaining the required information for configuring clients or other services to communicate with the Consul cluster effectively.'
