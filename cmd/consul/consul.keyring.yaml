# yaml-language-server: $schema=https://carapace.sh/schemas/command.json
name: keyring
description: Manages gossip layer encryption keys
flags:
    --ca-file=: Path to a CA file to use for TLS when communicating with Consul.
    --ca-path=: Path to a directory of CA certificates to use for TLS when communicating with Consul.
    --client-cert=: Path to a client cert file to use for TLS when 'verify_incoming' is enabled.
    --client-key=: Path to a client key file to use for TLS when 'verify_incoming' is enabled.
    --http-addr=: The `address` and port of the Consul HTTP agent.
    --install=: Install a new encryption key.
    --list: List all keys currently in use within the cluster.
    --list-primary: List all primary keys currently in use within the cluster.
    --local-only: Setting this to true will force the keyring query to only hit local servers (no WAN traffic).
    --relay-factor=: Setting this to a non-zero value will cause nodes to relay their response.
    --remove=: Remove the given key from the cluster.
    --tls-server-name=: The server name to use as the SNI host when connecting via TLS.
    --token-file=: File containing the ACL token to use in the request.
    --token=: ACL token to use in the request.
    --use=: Change the primary encryption key, which is used to encrypt messages.
documentation:
    command: '[AI] `consul keyring` is a Command-Line Interface (CLI) command for Consul, an open-source distributed, highly available, and data center aware solution to connect and configure applications. The keyring subcommand is used to manage cryptographic keys in the Consul service. It allows users to add, remove, or list keys from the keyring. These keys are used to secure communication between different Consul components, such as agent nodes and server clusters. By using `consul keyring`, users can ensure secure and encrypted data transfer within their Consul deployments.'
    flag:
        ca-file: '[AI] The `consul keyring --ca-file` command is used with Consul, an open-source tool for service discovery, configuration, and orchestration. In this specific context, the `--ca-file` flag refers to the path to a file containing the Certificate Authority (CA) certificates that will be trusted by Consul when dealing with secure communication, such as in the context of TLS/SSL encrypted connections between Consul servers or clients and the server. By specifying this CA file, Consul can verify the authenticity of certificates presented during secure communication, ensuring secure and encrypted data transfer.'
        ca-path: '[AI] The `--ca-path` flag in Consul''s `keyring` command is used to specify a directory containing CA (Certificate Authority) certificates for secure communication with Consul services. The flag enhances security by allowing the validation of the certificates presented by Consul servers during encrypted communication, ensuring that only trusted servers are connected to.'
        client-cert: |-
            [AI] The `consul keyring --client-cert` command is a part of Consul, a popular service discovery and configuration management tool. This specific command is used to list the client certificates that are enrolled in a Consul Keyring.

            The Keyring is a component of Consul that securely stores and manages cryptographic keys and certificates for different clients in a Consul cluster. It provides a centralized way to manage these credentials, ensuring that only authorized clients can communicate with the Consul servers.

            By running `consul keyring --client-cert`, you will see a list of client certificates along with their corresponding IDs and other details such as the certificate expiration date and the public key. This information is useful when you need to manage or revoke client certificates in your Consul cluster.
        client-key: '[AI] The `consul keyring --client-key` command is used in Hashicorp Consul, a service discovery and configuration management tool. This command retrieves the client KeyPair file that consists of a private key and public key. The private key is used for authentication when interacting with Consul API, while the public key is registered with Consul to allow secure communication between services and clients in a Consul-enabled environment.'
        http-addr: '[AI] The `--http-addr` flag in the Consul Keyring command is used to specify the HTTP address where Consul agent will listen for requests. By default, it listens on localhost (127.0.0.1) on port 8500. However, you can use this flag to configure it to listen on a different IP address or port for remote access. This is important when running Consul in a network environment where you may need to expose it to other hosts or services.'
        install: '[AI] `consul keyring --install` is a command used in Consul, a popular service discovery and configuration management tool. This command installs and initializes a Consul keyring on your system. The keyring is a component that securely stores encryption keys used for encrypting and decrypting sensitive data in Consul''s Key/Value store or other services. When you run this command, it generates a new encryption key and saves it to the specified location (by default, ~/.consul-keyring), configures the Consul CLI to use this keyring, and sets up the keyring so that it automatically unlocks when your system starts up.'
        list: '[AI] `consul keyring --list` is a command used in Hashicorp''s Consul service discovery and configuration tool. This command lists all keys currently stored in the Key-Value (KV) store of the Consul server or client. The KV store allows storing and retrieving arbitrary key-value pairs, providing a simple yet powerful way to manage application configurations and secrets. The output will typically include a column with the key names and another column showing their corresponding values.'
        list-primary: '[AI] `consul keyring --list-primary` is a command used in Hashicorp''s Consul service discovery and configuration management tool. This command lists the keys in the primary keyring, which stores encryption keys used for securely storing and retrieving sensitive data from the Consul server. These encrypted values can include secrets, credentials, or other sensitive information. The primary keyring is automatically replicated across all Consul servers in a datacenter for high availability and fault tolerance.'
        local-only: |-
            [AI] The `consul keyring --local-only` command is a tool from Hashicorp's Consul service, used to manage encryption keys for secure communication between services in a Consul cluster.

            This specific command tells Consul to only interact with the local keyring storage located on the machine running the command. It does not connect to any remote servers or clusters, which makes it suitable for managing sensitive encryption keys in an isolated environment. This can be useful for development, testing, or secure operations where local control of keys is desired.
        relay-factor: |-
            [AI] The `--relay-factor` flag in Consul Keyring is used to configure the number of servers that a keyring agent will relay keys to. A keyring agent is a component of Hashicorp's Consul service discovery and configuration management tool, which securely stores and distributes encryption keys.

            When using multiple keyring agents for high availability or security reasons, setting a positive value with `--relay-factor` allows each agent to relay keys to the specified number of other agents in the Keyring cluster. This ensures that even if some agents go down, the keys will still be available through the remaining agents. The default value is 1, meaning that each keyring agent only relays keys to itself.
        remove: '[AI] `consul keyring --remove` is a command provided by Consul, an open-source tool for service discovery, configuration, and orchestration. This command is used to remove a specific cryptographic key from the Keyring. The Keyring is a secure key management system that allows you to store, retrieve, and manage encryption keys and other sensitive data. By using `consul keyring --remove <key>`, you can safely delete a specific key, ensuring that it no longer has access to the Consul configuration or data. This command helps maintain security by allowing administrators to revoke access to outdated or compromised keys.'
        tls-server-name: '[AI] The `--tls-server-name` flag is a configuration option for Consul''s Keyring command in Hashicorp''s Consul service discovery and configuration management tool. This flag specifies the TLS server name to use when establishing secure communications between the Consul client and server during keyring operations. By providing a specific server name, it helps prevent man-in-the-middle attacks by verifying that the server''s identity matches the expected name.'
        token: '[AI] The `consul keyring --token` command is used in Consul, a distributed, highly available, and data center aware toolkit for service discovery, configuration, and orchestration. This specific command interacts with Consul''s key-value storage (keyring) using a token for authentication. The token is a unique string that identifies the permissions of an agent or a user in the Consul cluster. By providing this token, the command allows secure access to manipulate key-value data within the Consul cluster.'
        token-file: '[AI] The `consul keyring --token-file` command is used in Consul, a popular service discovery and configuration management tool, to load or save tokens into a file. The `--token-file` flag specifies the path to the file where tokens are stored or retrieved from. This command is useful for managing access to Consul services and keys securely by keeping sensitive tokens in encrypted files instead of hardcoding them directly into configuration files or scripts.'
        use: '[AI] `consul keyring --use` is a command from the Consul Keyring tool in the Consul service discovery and configuration management platform. This command is used to retrieve the value of a specific key from the encrypted key-value store. When you run this command followed by the path to the key, it decrypts the key and returns its plaintext value to the user. The main purpose of using `consul keyring --use` is to securely access sensitive information stored in Consul''s encrypted key-value store without exposing the data in plaintext.'
