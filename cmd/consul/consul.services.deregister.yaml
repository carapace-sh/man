# yaml-language-server: $schema=https://carapace.sh/schemas/command.json
name: deregister
description: Deregister services with the local agent
flags:
    --ca-file=: Path to a CA file to use for TLS when communicating with Consul.
    --ca-path=: Path to a directory of CA certificates to use for TLS when communicating with Consul.
    --client-cert=: Path to a client cert file to use for TLS when 'verify_incoming' is enabled.
    --client-key=: Path to a client key file to use for TLS when 'verify_incoming' is enabled.
    --datacenter=: Name of the datacenter to query.
    --http-addr=: The `address` and port of the Consul HTTP agent.
    --id=: ID to delete.
    --namespace=: Specifies the namespace to query.
    --stale: Permit any Consul server (non-leader) to respond to this request.
    --tls-server-name=: The server name to use as the SNI host when connecting via TLS.
    --token-file=: File containing the ACL token to use in the request.
    --token=: ACL token to use in the request.
documentation:
    command: '[AI] `consul services deregister` is a Command Line Interface (CLI) command for Hashicorp''s Consul service discovery and configuration management tool. This command allows you to remove a registered service from the Consul catalog, thereby deregistering it. You provide the service name, and optionally, the node address where the service was running, as arguments. Deregistering a service makes it no longer discoverable by other services or applications using Consul for service discovery.'
    flag:
        ca-file: '[AI] The `consul services deregister` command is used in Hashicorp Consul, a service discovery and configuration management tool, to remove a registered service from the Consul catalog. The `--ca-file` flag is an optional argument that specifies the path to a TLS certificate authority file. When this option is provided, the command will use the CA file for secure communication with the Consul server over TLS encrypted connections. This helps ensure the authenticity and confidentiality of data transmitted during deregistration.'
        ca-path: '[AI] The `consul services deregister --ca-path` command in Consul is used to deregister a service from the Consul service registry with a specific CA (Certificate Authority) certificate path. This option is helpful when dealing with secure communication and Certificate-based authentication, as it ensures that only services with valid certificates issued by the specified CA are allowed to register or deregister services. The `--ca-path` flag specifies the location of the CA certificate file on the local system.'
        client-cert: '[AI] The `consul services deregister` command with the `--client-cert` option is used to deregister a service from the Consul Discovery Service in Hashicorp''s Consul toolset. With this flag, the client certificate file is provided as an argument, which identifies the service that will be deregistered. The deregistration occurs by removing the corresponding registration information from the Consul server, thereby making the service no longer discoverable by clients.'
        client-key: '[AI] The `consul services deregister --client-key` command is used in Hashicorp Consul, a service discovery and configuration management tool. This command is employed to remove a specific registered service from Consul''s service registry using its client key. By providing the `--client-key` flag along with the desired client key, the command will deregister only the service associated with that particular client key without affecting other services. In summary, this command allows for selective removal of services from the Consul service catalog.'
        datacenter: '[AI] The `consul services deregister --datacenter` command is used in Consul, a Connect and Service Discovery tool by Hashicorp, to intentionally remove a registered service from the Consul catalog. This action can be performed with the `--datacenter` flag to specify a particular datacenter, which may include multiple availability zones or data centers within a single Consul cluster. By deregistering a service, its associated metadata and DNS records will be removed from the Consul catalog, effectively hiding it from other Consul clients that might be looking for it using its registered name or tag. This command can be used when a service is being taken down for maintenance or if its registration was inadvertent.'
        http-addr: '[AI] The `consul services deregister --http-addr` command is used in Hashicorp Consul, a service discovery and configuration management tool. This command is utilized to intentionally deregister a specific service instance from the Consul registry. The `--http-addr` option specifies the HTTP address of the Consul agent or server that manages the registration. By using this command, you can remove a service instance from being discovered and used by other applications, which may be useful in scenarios such as application updates, maintenance, or shutting down a service.'
        id: '[AI] The `consul services deregister --id <ServiceID>` command is used in Consul, a Connect and Service Discovery tool by Hashicorp. This command is employed to intentionally remove a specific registered service with the given ID from Consul''s service registry. By executing this command, you are effectively deregistering the specified service instance, which may result in it no longer being discoverable through Consul.'
        namespace: '[AI] The `consul services deregister --namespace` command is used in Hashicorp''s Consul service discovery and configuration tool. This command is employed to intentionally remove a registered service from Consul''s service registry, specifically within the named Kubernetes namespace. By using `--namespace` flag, you can specify the particular namespace where the deregistered service resides, ensuring that only services within that specific namespace are affected.'
        stale: '[AI] The `consul services deregister --stale` command is used in Hashicorp Consul, a service discovery and configuration management tool. This command forces the deregistration of stale or unhealthy services that have been marked as such by Consul but haven''t been automatically removed yet. By running this command, you ensure that your service registry remains up-to-date with the current state of your services, improving overall system health and availability.'
        tls-server-name: |-
            [AI] The `consul services deregister --tls` command is used in Hashicorp Consul, a service discovery and configuration management tool. This specific command is used to deregister a service from Consul's service registry using TLS (Transport Layer Security) encryption.

            The `--tls-server-name` option specifies the TLS server name or address that Consul is listening on for secure communication. When deregistering a service with this option, it ensures that only secure connections to the Consul server are used, which helps maintain security and integrity of data within the system.
        token: '[AI] `consul services deregister --token` is a command used in Hashicorp Consul, a service discovery and configuration management tool. This command is used to deregister a service from Consul''s service registry. The `--token` option specifies the token of an agent or client that has permission to register or deregister services. Using this command allows you to remove a previously registered service instance, thereby updating the discovery information in Consul.'
        token-file: '[AI] The `consul services deregister --token-file` command is used in Consul, a service discovery and configuration management tool, to deregister a service from the Consul catalog. The `--token-file` flag specifies the path to a file containing an admin token, which is required for performing this operation. The deregistration removes the service''s registration information from the Consul server, making it no longer discoverable by other Consul clients.'
