# yaml-language-server: $schema=https://carapace.sh/schemas/command.json
name: delete
description: Delete an intention
flags:
    --ca-file=: Path to a CA file to use for TLS when communicating with Consul.
    --ca-path=: Path to a directory of CA certificates to use for TLS when communicating with Consul.
    --client-cert=: Path to a client cert file to use for TLS when 'verify_incoming' is enabled.
    --client-key=: Path to a client key file to use for TLS when 'verify_incoming' is enabled.
    --datacenter=: Name of the datacenter to query.
    --http-addr=: The `address` and port of the Consul HTTP agent.
    --namespace=: Specifies the namespace to query
    --stale: Permit any Consul server (non-leader) to respond to this request.
    --tls-server-name=: The server name to use as the SNI host when connecting via TLS.
    --token-file=: File containing the ACL token to use in the request.
    --token=: ACL token to use in the request.
documentation:
    command: '[AI] `consul intent delete` is a command used in Hashicorp''s Consul service discovery and configuration management tool. It allows you to delete an intended change that has been proposed but not yet applied to the live system for safe rollback in case of errors or unexpected outcomes. By running this command followed by the CID (Consul Intended Data) of the specific intent, you can remove the pending change intentionally without affecting the current state of your Consul configuration.'
    flag:
        ca-file: '[AI] The `consul intent delete --ca-file` command is used in Hashicorp Consul, a connectivity and orchestration tool. This command is for deleting an SSL certificate from Consul''s Certificate Authority (CA) file. The `--ca-file` option specifies the path to the CA file. By using this command, you are intending to remove a specific certificate from the trusted pool of certificates managed by Consul. After executing the command, Consul will delete the specified certificate and update its internal state accordingly.'
        ca-path: '[AI] The `consul intent delete --ca-path` command is used in Consul, a Connect and Service Mesh platform, to delete a specific CA (Certificate Authority) certificate from Consul''s trust store. The `--ca-path` option specifies the file path to the CA certificate that is to be deleted. Once executed, Consul will remove the specified CA from its trust store, which in turn allows for revoking the associated certificates and securing your Consul environment against untrusted entities.'
        client-cert: '[AI] The `consul intent delete --client-cert` flag is used with Consul, a Connect and service discovery tool. This command intends to delete a specific client from Consul''s configuration, along with its associated client certificate. Using this flag ensures that both the client configuration and its corresponding client certificate are securely removed from the Consul environment.'
        client-key: '[AI] The `consul intent delete --client-key` command is used in Consul, a Connect and Service Mesh platform by Hashicorp, to intentionally delete a specific client with the given client key from Consul''s key-value store. This operation marks the client for deletion, and it will be physically removed once all dependent resources have been cleaned up. This command should be used carefully as it may affect services and other clients that depend on the client being deleted.'
        datacenter: '[AI] The `consul intent delete --datacenter` flag is used with Consul, a service discovery and configuration management tool. This command expresses the intention to delete a datacenter from the Consul cluster. It does not immediately delete the datacenter but marks it for deletion in the next available checkpoint or snapshot. The actual removal of the datacenter requires a quorum of nodes acknowledging the intent, ensuring consistency and avoiding data loss.'
        http-addr: '[AI] The `consul intent delete --http-addr` command is used in Consul, a connectivity and service discovery tool, to initiate the deletion of a registered service or node with a specific HTTP address from the Consul cluster. The flag `--http-addr` specifies the HTTP address of the service or node to be deleted. When executed, this command sends an intent to the Consul data center, which is then propagated to all other agents in the cluster. Once acknowledged by a quorum of agents, the registered resource with the given HTTP address will be removed from the cluster''s state, effectively deleting it.'
        namespace: |-
            [AI] The `consul intent delete` command is used in Hashicorp's Consul service to delete an intention from the Consul store. An intention represents a desired state for a service or configuration in the Consul service discovery and configuration system.

            The `--namespace` flag is optional, and when provided, it specifies the namespace scope of the intention to be deleted. Without this flag, Consul assumes the default namespace (often named "default"). If you want to delete an intention in a specific namespace, use the `--namespace <your-namespace>` flag followed by the name of the namespace where the intention was defined.
        stale: '[AI] The `consul intent delete --stale` command is used in Hashicorp Consul, a service discovery and configuration management tool. This command expresses the intention to delete resources in Consul that have been marked as stale, meaning they are no longer available or reachable. When this command is run, Consul will remove these stale resources from its registry and update the application configurations that depend on them accordingly. This helps keep the Consul catalog consistent with the actual state of the system.'
        tls-server-name: |-
            [AI] The `consul intent delete --tls-server-name` flag is used with the Consul API to initiate the deletion of a resource in a secure and intentional manner. It specifically pertains to resources that use TLS (Transport Layer Security) for communication, such as service registrations or agent addresses.

            When using this flag, the user specifies the TLS server name as an argument. This ensures that only the intended resource is deleted, and prevents accidental deletion of other resources with similar names. The Consul API will check if there is a resource with the given TLS server name for deletion before proceeding, adding an extra layer of security.
        token: '[AI] The `consul intent delete --token` command is used in Hashicorp Consul, a service discovery and configuration management tool, to issue an intent to delete an resource or key from the Consul KV store. The `--token` argument is a required authentication token with write permissions for performing the delete operation. This command does not immediately delete the resource; instead it sets an intention which will be executed once Consul''s data replication and conflict resolution mechanisms have ensured that the deletion is safe to perform across all replicas.'
        token-file: '[AI] The `consul intent delete --token-file` command is used with Hashicorp Consul, a connectivity and configuration management tool. This command is for intending to delete an entry from Consul''s key-value store or catalog using a token saved in a file. The `--token-file` flag specifies the path to this token file. This operation can only be carried out by an agent with write permission. It does not actually delete the entry right away but instead marks it for deletion, allowing for potential reversal of the action if needed. After running this command, you can check the status of the intention using `consul intent list` to confirm that the entry is queued for deletion.'
