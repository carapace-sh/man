# yaml-language-server: $schema=https://carapace.sh/schemas/command.json
name: build
description: Build a new versioned artifact from source
flags:
    --label=: Labels to set for this operation.
    --plain: Plain output
    --push: Push the artifact to the configured registry.
    --remote: True to use a remote runner to execute.
    --remote-source=: Override configurations for how remote runners source data.
    --var-file=: HCL or JSON file containing variable values to set for this operation.
    --var=: Variable value to set for this operation.
    -a, --app=: App to target.
    -p, --project=: Project to target.
    -w, --workspace=: Workspace to operate in.
documentation:
    command: '[AI] The `waypoint artifact build` command is used in Waypoint, an open-source Kubernetes infrastructure automation tool, to create a new Docker image or Helm chart based on a YAML manifest file. This command fetches the latest version of the specified manifest, builds the associated Dockerfile or Helm values file, and saves the resulting artifact in a container registry or local directory as defined in Waypoint''s configuration.'
    flag:
        app: '[AI] The `flag "waypoint artifact build" --app` is used in Kubernetes tooling like Waypoint to initiate a new build of a Docker image for the specified application. When this command is run, Waypoint will fetch the source code for the application, apply any changes since the last build, build the Docker image using the defined build configuration, and then push the new image to the specified registry. This process results in an updated artifact that can be deployed or used in a Kubernetes environment.'
        label: '[AI] The `--flag waypoint artifact build --label` command in Kubernetes is used to create a new container image using a `Build` resource, also known as a Dockerfile, in Kubernetes. The `--label` flag sets metadata labels for the resulting container image. Waypoint is an open-source GitOps toolkit for building, updating, and deploying applications on Kubernetes. This command is typically used as part of a continuous integration/continuous delivery (CI/CD) pipeline to automatically build and tag new images based on changes to source code.'
        plain: '[AI] The command `flag "waypoint artifact build" --plain` is related to Waypoint, an open-source continuous delivery and deployment platform for Kubernetes. This command is used to trigger a build of an artifact in Waypoint using a plain YAML configuration file instead of the standard HCL (Hierarchical Configuration Language) format. The `--plain` flag indicates that the input configuration will be in plain YAML format rather than the default HCL format. The output of this command is expected to be the built artifact, which can then be deployed or used in other ways within the Kubernetes environment.'
        project: '[AI] The command `flag "waypoint artifact build" --project` is used in Waypoint, an open-source continuous delivery and deployment tool for Kubernetes. This specific command initiates a new build of Docker images based on the defined configuration in a given Kubernetes project using Waypoint''s Artifact feature. In simpler terms, it tells Waypoint to create new Docker images from your source code within the specified Kubernetes project and store them as artifacts for further deployment processes.'
        push: |-
            [AI] The command `flag "waypoint artifact build --push"` is related to Waypoint, an open-source continuous integration and delivery platform for Kubernetes.

            This command triggers the following actions:

            1. Builds an artifact using the specified configuration in Waypoint.
            2. Pushes the built artifact to a container registry (like Docker Hub) after the build is successful. This can be useful for deploying images automatically into a production environment.
        remote: '[AI] The `flag "waypoint artifact build --remote"` is used with Waypoint, an open-source continuous delivery and deployment tool for Kubernetes. This flag instructs Waypoint to build an artifact (an image or container) from a remote repository instead of building it locally. It facilitates the use of pre-built images or containers for faster and more consistent deployments in your Kubernetes clusters.'
        remote-source: '[AI] The `waypoint` command with the argument `artifact build --remote-source` is used to build and push Kubernetes YAML manifests as artifacts in a remote source control system such as GitHub or Google Cloud Source Repositories using Waypoint, an open-source infrastructure automation tool. This command builds your infrastructure definition (usually written in HCL or Sentinel) located in the local working directory and pushes the resulting built YAML manifests to the specified remote source control system as new commits. It is a convenient way to version your infrastructure alongside your application code, enabling collaboration, automation, and easy rollback of changes.'
        var: '[AI] `flag "waypoint artifact build --var"` is a command used in Kubernetes and Helm, specifically in the context of building and deploying containerized applications. This flag sets variable values to be passed into the build process of an artifact or container image. For example, `--var="APP_VERSION=1.0.0"` sets the `APP_VERSION` variable to `1.0.0`. These variables can include application configurations, dependencies, and other necessary information for the successful construction of the artifact or container image.'
        var-file: '[AI] `flag "waypoint artifact build" --var-file` is a command used in Kubernetes and specifically with the tool "Kustomize" or "Waypoint" for building and managing YAML configuration files. This flag is used to pass a file containing variable values as arguments when building an artifact, which can then be used to replace placeholders in the Kubernetes manifests during the build process. The result is a new set of config files that are customized with the provided variables. This helps in managing and applying infrastructure changes more efficiently and consistently across different environments.'
        workspace: '[AI] The `waypoint` command with the argument `artifact build --workspace` creates a Kubernetes YAML manifest file or files based on the defined resources in a Waypoint workspace. Waypoint is an open-source tool for building, releasing, and managing applications across multiple environments. The `build` subcommand triggers the creation of artifacts from these manifests using the configured build system (like Docker), while `--workspace` specifies the particular Waypoint workspace to use. This command sets up the environment to generate and prepare artifacts for deployment.'
