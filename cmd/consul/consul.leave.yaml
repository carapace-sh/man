# yaml-language-server: $schema=https://carapace.sh/schemas/command.json
name: leave
description: Gracefully leaves the Consul cluster and shuts down
flags:
    --ca-file=: Path to a CA file to use for TLS when communicating with Consul.
    --ca-path=: Path to a directory of CA certificates to use for TLS when communicating with Consul.
    --client-cert=: Path to a client cert file to use for TLS when 'verify_incoming' is enabled.
    --client-key=: Path to a client key file to use for TLS when 'verify_incoming' is enabled.
    --http-addr=: The `address` and port of the Consul HTTP agent.
    --tls-server-name=: The server name to use as the SNI host when connecting via TLS.
    --token-file=: File containing the ACL token to use in the request.
    --token=: ACL token to use in the request.
documentation:
    command: '[AI] The `consul leave` command is used in Consul, a distributed, highly available, and data center aware toolkit for service discovery, configuration, and orchestration. This command instructs an agent to leave the cluster, removing it from the Consul service registry and reducing the overall cluster size. After running this command, the Consul agent will stop its services, perform any necessary graceful shutdown procedures, and then exit.'
    flag:
        ca-file: '[AI] `consul leave --ca-file` is a command used in Hashicorp Consul, an open-source tool for service discovery, configuration, and orchestration. This specific command is used to revoke a certificate from Consul''s Certificate Authority (CA). The `--ca-file` option specifies the path to the CA file used to issue the certificates. When this command is executed, the specified certificate will no longer be trusted by Consul services and clients, ensuring secure communication within the Consul ecosystem.'
        ca-path: '[AI] The `consul leave --ca-path` flag is used with Consul, an open-source tool for service discovery, configuration, and orchestration. This flag specifies the path to a directory containing the root certificate authority (CA) file used to authenticate and encrypt communications between different Consul components, such as agent nodes, server nodes, and clients. When a Consul agent leaves a cluster, this flag can be provided to ensure secure communication during the agent''s departure. By providing the correct CA path, both the departing agent and the remaining Consul components can verify each other''s identities and maintain security within the cluster.'
        client-cert: '[AI] The `consul leave --client-cert` command is used in Consul, a Connect and Service Mesh platform by Hashicorp. This command is employed to revoke an SSL client certificate from Consul''s key-value store. With this action, the associated client will no longer be able to authenticate and use Consul services. The `--client-cert` option specifies the path to the client certificate file that needs to be revoked.'
        client-key: '[AI] The `consul leave --client-key` command is used in Consul, a service discovery and configuration management tool, to deregister a client (an application or process) from the Consul server. This command requires the specified client key as an argument which uniquely identifies the client instance registered with Consul. By using this command with the correct client key, you can safely remove the associated client configuration from Consul without affecting other clients.'
        http-addr: '[AI] The `--http-addr` flag in the Consul command-line interface (CLI) tool is used to specify the IP address and port number where the Consul HTTP API will listen. For example, `consul leave --http-addr 192.168.0.1:8500` sets the Consul agent to leave the cluster and shut down, while listening for HTTP requests on IP address `192.168.0.1` and port number `8500`. The default HTTP API listen address is `localhost:8500`, so this flag is only necessary when running Consul in a non-default configuration.'
        tls-server-name: '[AI] The `consul leave --tls` command is used to deregister a service from Consul, a distributed mapping and service discovery tool. The `--tls-server-name` option specifies the TLS server name that should be used for secure communication with the Consul HTTP API. This allows you to provide the exact name of the TLS certificate authority (CA) that was used to secure your Consul server, ensuring that only trusted connections are established between your client and the server during deregistration.'
        token: '[AI] The `consul leave --token` command is used in Consul, a distributed, highly available, and data center aware toolkit for service discovery, configuration, and orchestration. This command allows a node to voluntarily leave the Consul cluster using a provided token. It ensures a controlled removal of a member from the Consul datacenter, maintaining the consistency and stability of the system.'
        token-file: '[AI] `consul leave` is a command provided by the Consul service discovery and configuration tool. The `--token-file` option specifies the path to a file containing a Consul token used for authentication. When this option is used, the `consul leave` command will use the token from the file instead of requiring it to be provided as an argument. This helps keep sensitive information such as tokens securely stored and not exposed in commands run in public or untrusted environments.'
