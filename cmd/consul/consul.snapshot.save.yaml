# yaml-language-server: $schema=https://carapace.sh/schemas/command.json
name: save
description: Saves snapshot of Consul server stat
flags:
    --ca-file=: Path to a CA file to use for TLS when communicating with Consul.
    --ca-path=: Path to a directory of CA certificates to use for TLS when communicating with Consul.
    --client-cert=: Path to a client cert file to use for TLS when 'verify_incoming' is enabled.
    --client-key=: Path to a client key file to use for TLS when 'verify_incoming' is enabled.
    --datacenter=: Name of the datacenter to query.
    --http-addr=: The `address` and port of the Consul HTTP agent.
    --stale: Permit any Consul server (non-leader) to respond to this request.
    --tls-server-name=: The server name to use as the SNI host when connecting via TLS.
    --token-file=: File containing the ACL token to use in the request.
    --token=: ACL token to use in the request.
documentation:
    command: '[AI] The `consul snapshot save` command in Consul is used to create a snapshot of the current state of the Consul configuration, data, and keys. This snapshot can then be restored using the `consul snapshot restore` command for disaster recovery or to transfer the data between different Consul clusters. The saved snapshot file is stored as a binary file with the extension `.hclsn`, which can be easily transferred and restored in various environments.'
    flag:
        ca-file: '[AI] `consul snapshot save --ca-file` is a command used in Hashicorp Consul, a connectivity and configuration management tool. This command creates a snapshot of the entire Consul data store and saves it as a file. The `--ca-file` option specifies that the snapshot should be saved with a custom CA (Certificate Authority) file. This is useful when you want to securely transfer the snapshot file over an insecure channel, such as email or public file sharing services, by encrypting it with your own CA key. The resulting snapshot file can then be imported back into another Consul server to restore its state.'
        ca-path: '[AI] The `consul snapshot save --ca-path` command in Consul is used to create a backup of the entire Consul data directory, including the CA certificates (used for secure communication with clients and servers), into a file. The `--ca-path` option specifies the output path for the CA certificates within the saved snapshot file. This command ensures that important data and certificates are safely preserved for disaster recovery or other purposes.'
        client-cert: '[AI] `consul snapshot save --client-cert` is a command used in Consul, a connectivity and service discovery tool. This command saves a snapshot of the entire Consul datastore with TLS encryption using the provided client certificate for secure transfer. The flag `--client-cert` specifies the path to the client certificate file for authentication when making the API request. The snapshot is saved as a binary file, preserving the data in its entirety and ensuring data consistency across different Consul clusters or instances.'
        client-key: '[AI] The `consul snapshot save --client-key` command is used in Consul, a distributed, highly available, and data center aware solution to connect and configure applications, monitor their health, and bootstrap service discovery for your data center and cloud initiatives. This command saves a snapshot of the Consul''s key-value data using the provided client key instead of the default one. It creates a file containing the server''s data in a JSON format, which can be used for backup or migration purposes.'
        datacenter: |-
            [AI] The `consul snapshot save --datacenter` command is used in Hashicorp Consul, a distributed, highly available key-value store and service registry. This command saves a snapshot of the data stored in a specific datacenter of a Consul cluster.

            When executed, it creates a file containing the serialized data of that datacenter's cache, including its key-value data and service registry information. The resulting snapshot file can be used to restore the same data in case of data loss or for backups.
        http-addr: '[AI] The `consul snapshot save --http-addr` command is used in Hashicorp''s Consul service to create a snapshot of the current data stored in a Consul server or client and save it to a file. The option `--http-addr` specifies the HTTP address where Consul can be contacted to execute the snapshot creation. It takes the value as an argument, for example, `--http-addr http://localhost:8501`, indicating that the Consul server or client is running on localhost and listens on port 8501 for HTTP requests. This command is useful when you want to periodically save a copy of your data for backup or disaster recovery purposes.'
        stale: '[AI] `consul snapshot save --stale` is a command used in Consul, an open-source distributed computing platform. This command takes a snapshot of the current state of the Consul data store but accepts stale data, meaning it will include any modifications that have been applied but not yet replicated across all nodes in the Consul cluster. This can be useful when dealing with large clusters or when quick recovery from a failed node is required, as the snapshot will still contain the latest changes even if they have not fully propagated throughout the cluster.'
        tls-server-name: '[AI] `consul snapshot save --tls-server-name` is a command used in Consul, a connectivity and service discovery tool. This specific command saves a snapshot of the Consul data using TLS (Transport Layer Security) with a specified server name. The snapshot contains the current state of all keys stored in the Consul key-value store. Using `--tls-server-name` helps ensure secure communication by specifying the correct TLS server name during the snapshot process.'
        token: |-
            [AI] `consul snapshot save --token` is a command used in Consul, a distributed, highly available, and data center aware solution to connect and configure applications, monitor their health, and bind services on any infrastructure, including DC/OS, Docker, and Kubernetes.

            This specific command saves a snapshot of the entire Consul data store with the given token. The `--token` argument is used for authentication and ensures that only authorized users or processes can save snapshots. Saving a snapshot creates an archive containing the current state of all keys in the tree, which can be used for disaster recovery or for transferring data between Consul clusters.
        token-file: '[AI] `consul snapshot save` is a command used in Consul, an open-source distributed computing platform. It''s used to create a snapshot of the Consul data store and save it as a file. The `--token-file` option specifies a file path where the Consul HTTP API token should be read from, providing secure access to the Consul API for taking the snapshot.'
