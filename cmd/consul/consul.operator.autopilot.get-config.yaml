# yaml-language-server: $schema=https://carapace.sh/schemas/command.json
name: get-config
description: Display the current Autopilot configuration
flags:
    --ca-file=: Path to a CA file to use for TLS when communicating with Consul.
    --ca-path=: Path to a directory of CA certificates to use for TLS when communicating with Consul.
    --client-cert=: Path to a client cert file to use for TLS when 'verify_incoming' is enabled.
    --client-key=: Path to a client key file to use for TLS when 'verify_incoming' is enabled.
    --datacenter=: Name of the datacenter to query.
    --http-addr=: The `address` and port of the Consul HTTP agent.
    --stale: Permit any Consul server (non-leader) to respond to this request.
    --tls-server-name=: The server name to use as the SNI host when connecting via TLS.
    --token-file=: File containing the ACL token to use in the request.
    --token=: ACL token to use in the request.
documentation:
    command: '[AI] The `consul operator autopilot get-config` command is used with the Consul Kubernetes Operator to retrieve the current configuration of the Autopilot mode. Autopilot is a feature provided by the Consul operator that automatically configures and manages Consul services in a Kubernetes cluster. The output of this command will provide information on how Consul services are deployed, configured, and managed within the Kubernetes environment.'
    flag:
        ca-file: '[AI] The `consul operator autopilot get-config --ca-file` command is used to retrieve the CA (Certificate Authority) file from a Consul service mesh deployment managed by the Consul Operator in an autopilot mode. This CA file is required for mutual TLS authentication between services in the mesh, and can be utilized to issue client certificates for communication with those services. The `--ca-file` flag specifies the output file path where the CA certificate will be saved upon execution.'
        ca-path: '[AI] `consul operator autopilot get-config --ca-path` is a command used with the Consul Service Mesh Operator, specifically the autopilot mode. This command retrieves the CA (Certifying Authority) path from the current configuration of the Consul service mesh. The CA is responsible for issuing and managing SSL/TLS certificates used to secure communication between various components within the service mesh. In this context, the output of this command will provide the location (path) of the CA files that need to be trusted in order to establish secure communication in the Consul service mesh environment.'
        client-cert: '[AI] `consul operator autopilot get-config --client-cert` is a command used with the Consul Service Mesh Operator for Kubernetes. This command retrieves the configuration of the Autopilot feature, specifically related to client certificates. Autopilot automates various aspects of running a Consul service mesh, and this command helps manage client certificates as part of that automation. The `--client-cert` flag requests information about the client certificate settings in the autopilot configuration.'
        client-key: '[AI] The `consul operator autopilot get-config --client-key` command is used with the Consul service mesh operator to retrieve the configuration for a specific client with a given client key from the Autopilot mode of the operator. Autopilot automatically configures and manages Consul services based on Kubernetes labels, making it easier to manage service discovery and connectivity in complex environments. The command returns the configuration as YAML or JSON format which can be further processed or used for troubleshooting purposes.'
        datacenter: '[AI] The `consul operator autopilot get-config --datacenter` command is used with the Consul Service Mesh Operator to retrieve the configuration related to a specific datacenter from the Autopilot mode of the operator. The Autopilot mode automatically configures and manages the Consul service mesh based on the Kubernetes infrastructure, making it easier to deploy and manage. This command helps in obtaining the current configuration details for better understanding or troubleshooting purposes. It does not make any changes to the configuration but simply retrieves the information.'
        http-addr: '[AI] The `consul operator autopilot get-config --http-addr` command is used with the Consul Kubernetes Operator to retrieve the HTTP address where the Consul server can be accessed. The `autopilot` flag indicates that the operator is managed by Kubernetes'' Autopilot (also known as GWM or General Workload Manager), which automates deployment, scaling, and management of applications in a cluster. The output of this command will provide the IP address and port number where Consul server can be accessed outside of the cluster.'
        stale: '[AI] The `consul operator autopilot get-config --stale` command is used to retrieve the current configuration of a Consul service mesh deployment managed by Consul Connect''s Autopilot feature, even if the configuration has not yet been applied or synced with the running services. The `--stale` flag allows retrieving the desired state without waiting for it to be fully synchronized with the actual running services. This can be useful for checking the intended changes before they take effect in production.'
        tls-server-name: '[AI] The `consul operator autopilot get-config --tls-server-name` command is used with the Consul Kubernetes Operator to retrieve the TLS server name for secure communication between the operator and Consul cluster. This value is essential when configuring external access to the Consul service mesh or other Consul services. The flag `--tls-server-name` specifies the DNS label or IP address of the Consul server, which acts as the TLS server in this context. The output from the command will provide the required information to configure secure communication channels between various components using Consul.'
        token: '[AI] The `consul operator autopilot get-config --token` command is used with the Consul Service Mesh Operator, which simplifies the deployment and management of a Consul service mesh. This specific command retrieves the current configuration of the Consul service mesh managed by the Autopilot mode of the Consul Operator. The `--token` argument provides an authentication token to access the Config API securely. The output will be in YAML format, which can then be used for modification or comparison purposes.'
        token-file: '[AI] The `consul operator autopilot get-config --token-file` command is used to retrieve the configuration of a Consul service mesh using Consul Operator''s Autopilot mode. The `--token-file` flag specifies the path to a file containing an authentication token that grants access to the Consul API. This command helps in checking the current configuration of the Consul service mesh and making necessary changes if required, while ensuring secure access to the API through the use of a token file.'
