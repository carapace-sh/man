# yaml-language-server: $schema=https://carapace.sh/schemas/command.json
name: hcl2-upgrade
description: Rewrites HCL2 config files to canonical format
flags:
    -output-file=: Set output file name.
    -with-annotations: Add helper annotation comments to the file to help new HCL2 users understand the template format.
documentation:
    command: '[AI] `packer` is an open-source tool used for building machine images, including virtual machines, container images, and more. The `hcl2-upgrade` command is a subcommand of Packer that helps upgrade the Hashicorp Configuration Language (HCL) version used in Packer configuration files from HCL 1 to HCL 2. This command does not create or modify any machine images but instead updates the syntax of Packer configuration files to be compatible with HCL 2, which is the recommended and more powerful version of HCL for Packer users. The `hcl2-upgrade` command scans a directory and its subdirectories for Packer configuration files (files ending in .pkr.hcl or .hcl), identifies any deprecated HCL 1 syntax, and converts them to their HCL 2 equivalents, making the configuration files ready for use with the latest version of Packer.'
    flag:
        output-file: '[AI] `packer hcl2-upgrade` is a command from Hashicorp Packer tool used to update infrastructure configurations written in HCL (Hashicorp Configuration Language) version 2. The `-output-file` flag specifies the file path where the updated configuration will be saved upon completion of the upgrade process. This flag enables users to easily manage and version their infrastructure code while ensuring compatibility with the latest Packer features.'
        with-annotations: '[AI] `packer hcl2-upgrade` is a command from Packer, an open-source tool for building machine images. The `hcl2-upgrade` subcommand is used to upgrade the HCL (Hashicorp Configuration Language) format from version 1 to version 2 in existing Packer configuration files. The `-with-annotations` option indicates that annotations should be migrated during the upgrade process. Annotations are arbitrary key-value pairs added to resources or data blocks in the Packer configuration file, and they can be used to store custom metadata. With this option, any annotations present in the version 1 HCL files will be preserved and converted to the equivalent format in version 2 HCL files.'
